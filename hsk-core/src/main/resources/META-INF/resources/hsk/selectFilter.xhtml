<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:cc="http://java.sun.com/jsf/composite"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
     xmlns:h="http://xmlns.jcp.org/jsf/html">
    <cc:interface>
        <cc:attribute name="value" type="com.hiska.result.Filter"/>
        <cc:attribute name="label"/>
        <cc:attribute name="title"/>
        <cc:attribute name="alt"/>
        <cc:attribute name="converter" type="java.lang.String" default="javax.faces.String"/>
        <cc:attribute name="option" default="false"/>
        <cc:attribute name="update" default="#{cc.clientId}"/>
        <cc:attribute name="styleClass" default="form-control form-control-sm"/>
    </cc:interface>
    <cc:implementation>
        <div id="#{cc.clientId}" class="hsk-input-filter #{styleClass}">
            <c:set target="#{cc.attrs}" property="value" value="#{_help.createFilterValue(cc.attrs.value)}"/>
            <div class="input-group input-group-sm">
                <h:selectOneMenu value="#{cc.attrs.value.value}"
                                 title="Fitlrar Campo '#{cc.attrs.label}'"
                                 styleClass="filter-eq form-control form-control-sm">
                    <f:selectItem itemValue="#{null}" itemLabel="Todos"/>
                    <cc:insertChildren/>
                    <f:ajax event="change"
                            immediate="true"/>
                    <f:ajax event="change"
                            render="#{cc.attrs.update}"
                            listener="#{_help.changeValue(cc.attrs.value)}"/>
                </h:selectOneMenu>
                <h:commandLink styleClass="btn btn-sm btn-danger"
                               rendered="#{!cc.attrs.value.ignore}"
                               title="Quitar '#{cc.attrs.label}'">
                    <span class="fa fa-lg fa-times"></span>
                    <f:ajax event="action" 
                            render="#{cc.attrs.update}"
                            immediate="true"/>
                    <f:setPropertyActionListener target="#{cc.attrs.value}"
                                                 value="#{null}"/>
                </h:commandLink>
            </div>
        </div>
    </cc:implementation>
</div>
